<ion-header>
  <ion-toolbar>
    <ion-title>Analisi Finanziaria</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <!-- Selettore di periodo -->
  <ion-card>
    <ion-card-content>
      <ion-segment (ionChange)="periodChanged($event)" [value]="selectedPeriod">
        <ion-segment-button value="week">
          <ion-label>Settimana</ion-label>
        </ion-segment-button>
        <ion-segment-button value="month">
          <ion-label>Mese</ion-label>
        </ion-segment-button>
        <ion-segment-button value="year">
          <ion-label>Anno</ion-label>
        </ion-segment-button>
      </ion-segment>

      <div *ngIf="selectedPeriodSelected && !typeSelected" class="ion-text-center ion-padding-top">
        <p>Seleziona un tipo di transazione da visualizzare</p>
      </div>

      <ion-segment *ngIf="selectedPeriodSelected && !typeSelected"
      (ionChange)="typeFilterChanged($event)"
      [value]="transactionTypeFilter || null"
      class="ion-margin-top type-filter-segment">
        <ion-segment-button value="all">
          <ion-label>Tutte</ion-label>
        </ion-segment-button>
        <ion-segment-button value="income">
          <ion-label>Entrate</ion-label>
        </ion-segment-button>
        <ion-segment-button value="expense">
          <ion-label>Uscite</ion-label>
        </ion-segment-button>
    </ion-segment>

      <!-- Visualizzazione compatta dopo la selezione del tipo -->
      <div *ngIf="selectedPeriodSelected && typeSelected" class="ion-padding-horizontal ion-margin-top">
      <ion-chip color="primary" (click)="resetTypeFilter()">
      <ion-label>{{ getTypeLabel() }}</ion-label>
      <ion-icon name="close-circle"></ion-icon>
      </ion-chip>
      </div>
    </ion-card-content>
  </ion-card>

  <ion-card>
    <ion-card-header>
      <ion-card-title>Andamento del saldo</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <canvas #balanceCanvas></canvas>
    </ion-card-content>
  </ion-card>

  <ion-card>
    <ion-card-header>
      <ion-card-title>Entrate vs Spese</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <canvas #comparisonCanvas></canvas>
    </ion-card-content>
  </ion-card>
</ion-content>
